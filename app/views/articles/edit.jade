extends ../layouts/default
block main
  - if(!article.isNew)
    | &nbsp;
    a(href="/articles/"+article._id, class="")
      span [back]
  h1= title


block content

  - var action = '/articles'
  - action += article.isNew? '' : '/' + article.id
  .row
    - if(!article.isNew)
      .col-md-12
        ul.nav.nav-tabs
          li
            a(href="#basic",data-toggle="tab") Basic
          li
            a(href="#video",data-toggle="tab") Video
          li.active
            a(href="#quiz",data-toggle="tab") Quiz
          li
            a(href="#reading",data-toggle="tab") Reading
          li
            a(href="#discuss",data-toggle="tab") Discuss
        hr
        .tab-content
          .tab-pane#basic
            include components/_basicForm

          .tab-pane#video
            include  components/_videoForm
          .tab-pane.active#quiz
            form.form-horizontal(method="post",
                action="/articles/#{article._id}/quizzes", enctype="multipart/form-data",
                role="form", id="quizForm2")
              input(type="hidden", name="_csrf", value="#{csrf_token}")

          .tab-pane#reading
            //include components/_readingForm

          .tab-pane#discuss
            //include components/_discussForm

    - else
      .col-md-12
        include components/_basicForm

block foot
  script.
    console.log(!{JSON.stringify(req.article)});
    var article = !{JSON.stringify(req.article)};
    $(document).ready(function(){
      MyApp.formBuild({data:article,formBody:'#quizForm2'});
    });